var Popup=function(){var e;let t,s;return validationEntrePassInput=function(e){let t=e.target.value.replace(/[^A-Za-z0-9]*$/,"");e.target.value=t,t.length<8?($(".pass-border").css({border:"1px solid red",borderRadius:"6px"}),$(".block").css("display","block")):($(".block").css("display","none"),$(".pass-border").css("border","1px solid #E0E0E0"))},requestPassword=function(e){1==t?($(".main-container").css("display","none"),$(".floating-button").attr("id","cross"),$(".password-container").css("display","block"),$(".hide").click((function(){$(this).parent().closest("div").find("input").attr("type",(function(e,t){return"password"===t?"text":"password"})),$(this).toggleClass("show")})),document.getElementById("e-pass").addEventListener("input",validationEntrePassInput),$(".pass-btn-entr").click((function(){document.getElementById("e-pass").value===s?($(".pass-footer").text(""),e("accepted")):$(".pass-footer").text("Invalid password")}))):e("accepted")},initClickListener=function(){$("#bt-start").click((function(){e.changeState("start"),window.close()})),$("#bt-stop").click((function(){requestPassword((t=>{"accepted"===t&&(e.changeState("stop"),window.close())}))})),$("#bt-pause").click((function(){requestPassword((t=>{"accepted"===t&&(e.changeState("pause"),window.close())}))})),$("#bt-options").click((function(){chrome.runtime.openOptionsPage(),window.close()})),$("#bt-resume").click((function(){e.changeState("resume"),window.close()})),$(".floating-button").click((function(){"settings"===this.id&&chrome.runtime.openOptionsPage(),window.close()})),$(".skip-break-active").click((function(){e.getTimerInformation().isBreak&&e.getTimerInformation().isPaused?e.changeState("resume"):e.skipBreak(),window.close()})),$(".rate-us").click((function(){chrome.tabs.create({url:`https://chrome.google.com/webstore/detail/block-focus/${chrome.runtime.id}/reviews`}),window.close()}))},startTimer=function(){const t=e.getTimerInformation(),s=6e4*t.total,a=t.previousTimestamp+s-t.elapsedTime,o=6e4,i=36e5,n=24*i;let r=new Date,d=String(r.getDate()).padStart(2,"0"),l=String(r.getMonth()+1).padStart(2,"0"),c=r.getFullYear(),m=a+c;r=l+"/"+d+"/"+c,r>m&&(m=a+(c+1));const p=new Date(m).getTime();setInterval((function(){const e=(new Date).getTime(),t=p-e;document.getElementById("days").innerText=Math.floor(t/n),document.getElementById("hours").innerText=Math.floor(t%n/i),document.getElementById("minutes").innerText=Math.floor(t%i/o),document.getElementById("seconds").innerText=Math.floor(t%o/1e3)}),0)},checkPassword=function(){chrome.storage.local.get((e=>{e.siteBlockerPassword&&""!==e.siteBlockerPassword?(t=!0,s=e.siteBlockerPassword):t=!1}))},{init:function(t){var s=(e=t.BgCtrl).getTimerInformation()||{},a=e.getOptions(),o=e.isExecuting(),i=e.isPaused(),n=s.isBreak;checkPassword(),$(".floating-button").attr("id","settings"),o||($(".main-header-logo").addClass("green-logo"),$(".main-header-title").text("Focus Mode"),$(".main-header-text").text("Focus on a task & be more productive"),$("#bt-start").css("display","flex"),$("#bt-options").css("display","flex"),$(".main-footer").text("Rate Us"),$(".main-footer").addClass("rate-us")),o&&($(".main-header-logo").addClass("red-logo"),$(".main-header-title").text("Focus Mode"),$(".main-header-text").text(`Worked cycles: ${s.executions}`),$("#bt-stop").css("display","flex"),$("#bt-pause").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").addClass("skip-break")),i&&($("#bt-start").css("display","none"),$("#bt-options").css("display","none"),$(".main-header-logo").addClass("green-logo"),$(".main-header-title").text("Focus Mode"),$(".main-header-text").text(`Worked cycles: ${s.executions}`),$("#bt-stop").css("display","flex"),$("#bt-resume").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").addClass("skip-break")),a.hidePause&&o&&($(".main-header-logo").addClass("red-logo"),$(".main-header-title").text("Focus Mode"),$(".main-header-text").text(`Worked cycles: ${s.executions}`),$(".buttons").css("display","none"),$(".timer-box").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").addClass("skip-break"),startTimer()),n&&($(".main-header-logo").addClass("blue-logo"),$(".main-header-title").text("Break Mode"),$(".main-header-text").text("Now you can visit sites you want"),$("#bt-stop").css("display","flex"),$("#bt-pause").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").removeClass("skip-break"),$(".main-footer").addClass("skip-break-active")),n&&i&&($("#bt-start").css("display","none"),$("#bt-options").css("display","none"),$("#bt-pause").css("display","none"),$(".main-header-logo").addClass("blue-logo"),$(".main-header-title").text("Break Mode"),$(".main-header-text").text("Now you can visit sites you want"),$("#bt-stop").css("display","flex"),$("#bt-resume").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").removeClass("skip-break"),$(".main-footer").addClass("skip-break-active")),n&&a.hidePause&&($(".main-header-logo").addClass("blue-logo"),$(".main-header-title").text("Break Mode"),$(".main-header-text").text("Now you can visit sites you want"),$(".timer-box").css("display","none"),$("#bt-resume").css("display","none"),$(".buttons").css("display","flex"),$("#bt-stop").css("display","flex"),$("#bt-pause").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").removeClass("skip-break"),$(".main-footer").addClass("skip-break-active")),n&&a.hidePause&&i&&($(".main-header-logo").addClass("blue-logo"),$(".main-header-title").text("Break Mode"),$(".main-header-text").text("Now you can visit sites you want"),$(".timer-box").css("display","none"),$("#bt-pause").css("display","none"),$(".buttons").css("display","flex"),$("#bt-stop").css("display","flex"),$("#bt-resume").css("display","flex"),$(".main-footer").text("Skip break"),$(".main-footer").removeClass("rate-us"),$(".main-footer").removeClass("skip-break"),$(".main-footer").addClass("skip-break-active")),initClickListener()}}}();document.addEventListener("DOMContentLoaded",(function(){chrome.runtime.getBackgroundPage(Popup.init)}));